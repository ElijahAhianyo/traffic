# Traffic Data

[_Documentation generated by Documatic_](https://www.documatic.com)

<!---Documatic-section-Codebase Structure-start--->
## Codebase Structure

<!---Documatic-block-system_architecture-start--->
```mermaid
flowchart LR
data-->core
```
<!---Documatic-block-system_architecture-end--->

# #
<!---Documatic-section-Codebase Structure-end--->

<!---Documatic-section-traffic.data.samples.__init__.get_flight-start--->
## [traffic.data.samples.__init__.get_flight](5-traffic_data.md#traffic.data.samples.__init__.get_flight)

<!---Documatic-section-get_flight-start--->
```mermaid
flowchart LR
traffic.data.samples.__init__.get_flight-->traffic.core.flight.Flight
```

### Object Calls

* [traffic.core.flight.Flight](4-traffic_core.md#traffic.core.flight.Flight)

<!---Documatic-block-traffic.data.samples.__init__.get_flight-start--->
<details>
	<summary><code>traffic.data.samples.__init__.get_flight</code> code snippet</summary>

```python
@lru_cache()
def get_flight(filename: str, directory: Path) -> Union[Flight, Traffic]:
    flight: Union[None, Flight, Traffic] = Traffic.from_file(directory / f'{filename}.json.gz', dtype={'icao24': str})
    if flight is None:
        raise RuntimeError(f'File {filename}.json.gz not found in {directory}')
    icao24 = set(flight.data.icao24) if 'icao24' in flight.data.columns else []
    if len(icao24) <= 1:
        if Flight(flight.data).split('1H').sum() == 1:
            flight = Flight(flight.data)
    if 'hour' in flight.data.columns:
        flight = flight.assign(hour=lambda df: pd.to_datetime(df.hour * 1000000000.0).dt.tz_localize('utc'))
    if 'last_position' in flight.data.columns:
        flight = flight.assign(last_position=lambda df: pd.to_datetime(df.last_position * 1000000.0).dt.tz_localize('utc'))
    return flight.assign(timestamp=lambda df: df.timestamp.dt.tz_localize('utc'))
```
</details>
<!---Documatic-block-traffic.data.samples.__init__.get_flight-end--->
<!---Documatic-section-get_flight-end--->

# #
<!---Documatic-section-traffic.data.samples.__init__.get_flight-end--->

[_Documentation generated by Documatic_](https://www.documatic.com)